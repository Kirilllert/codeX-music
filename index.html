<!DOCTYPE html>
<html>
<head>
	<title>Chillout Audio Synthesis</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
</head>
<body>
	<div class="conteiner-of-allBody">
		<div class="conteiner-of-programm">
			<table>
  <tbody>
    <tr>
      <td class="tracks">Tracks</td>
      <td>Instrument</td>
      <td>Melody</td>
      <td>Interval,ms</td>
      <td>Effect</td>
      <td>Effect again</td>
      <td>Track volume</td>

    </tr>
    <tr>
       <td>
      	<div id="play" class="button-play">
      		Play
     	 </div>
  		</td>
      <td>xylophone</td>
      <td>
        <input id="notes" type="" name="">
      </td>
      <td>
        <input type="" name="">
      </td>
      <td><input type="" name=""></td>
      <td><input type="range" min="0" max="100" step="1" value="50"></td>
      <td><input type="range" min="0" max="100" step="1" value="50"></td>
    </tr>

  </tbody>
</table>
		</div>
	</div>


<script type="text/javascript">
	let plays = document.getElementById('play');
  let notes = document.getElementById('notes');
  

class Sound {

  constructor(context) {
    this.context = context;
  }

  init() {
    this.oscillator = this.context.createOscillator();
    this.gainNode = this.context.createGain();

    this.oscillator.connect(this.gainNode);
    this.gainNode.connect(this.context.destination);
    this.oscillator.type = 'sine';
  }

  play(value, time) {
    this.init();

    this.oscillator.frequency.value = value;
    this.gainNode.gain.setValueAtTime(1, this.context.currentTime);
            
    this.oscillator.start(time);
    this.stop(time);

  }

  stop(time) {
    this.gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1);
    this.oscillator.stop(time + 1);
  }

}

plays.onclick = function(){
let context = new (window.AudioContext || window.webkitAudioContext)();
let note = new Sound(context);
let now = context.currentTime;
let allnotes = notes.value;
let massiveNotes = allnotes.split(' ');

let c4 = 261.63;
note.play(c4, now);
}





</script>
</body>
</html>